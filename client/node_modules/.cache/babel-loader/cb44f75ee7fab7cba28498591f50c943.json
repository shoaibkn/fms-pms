{"ast":null,"code":"import _slicedToArray from\"C:/Users/shoaibkn/Documents/projects/app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Button from\"../components/button\";import Input from\"../components/input\";import SelectInput from\"../components/input-select\";import TableHeader from\"../components/table-header\";import TableRow from\"../components/table-row\";import\"../index.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BillReceive(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),poStore=_useState2[0],setPoStore=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),supplierList=_useState4[0],setSupplierList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),materialList=_useState6[0],setMaterialList=_useState6[1];//useEffect Hook to fetch supplier names\nuseEffect(function(){//make api call to server to fetch all suppliers\naxios.get(\"http://localhost:3500/bill_receive/supplier_list\").then(function(response){if(!response){alert(\"Critical Error No response Received!!\");}else{setSupplierList(response.data);//console.log(genSupList);\n}});},[]);var fetchMaterials=function fetchMaterials(){var supplierName=document.getElementById(\"supName\").value;axios.post(\"/bill_receive/material_list\",{supplierName:supplierName,store_po:poStore}).then(function(response){setMaterialList(response.data[0]);console.log(response.data[0]);});};var storeList=[\"Grinderies\",\"Lasting\",\"Chemical\",\"Sample\",\"Leather\",\"General\"];var addPO=function addPO(){var storename=document.getElementById(\"storeName\").value;var st;switch(storename){case\"Grinderies\":st=\"GS\";break;case\"Lasting\":st=\"LAS\";break;case\"Chemical\":st=\"CS\";break;case\"Leather\":st=\"LS\";break;case\"General\":st=\"GES\";break;case\"Sample\":st=\"SS\";break;default:st=\"\";}var ponumber=document.getElementById(\"poNum\").value;var stringData;stringData=st+\"_\"+ponumber;var existingData=poStore;if(st===\"default\"||ponumber===\"\"){alert(\"No Data Selected\");return;}if(stringData===\"undefined_\"){stringData=\"\";}if(stringData===\"No PO/Store Selected\"){setPoStore(\"\");}if(existingData===\"_\"){existingData=\"\";}if(existingData===\"\"){setPoStore(stringData);}else{setPoStore(existingData+\"; \"+stringData);}document.getElementById(\"storeName\").value=\"\";document.getElementById(\"poNum\").value=\"\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"billScreen\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"initEntry\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"screen-header\",children:\"Bill Receive Form\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-1\",children:[/*#__PURE__*/_jsx(Input,{name:\"Date\",for:\"date\",type:\"date\",placeholder:\"dd/mm/yyyy\"}),/*#__PURE__*/_jsx(Input,{name:\"Bill Number\",for:\"number\",type:\"number\",placeholder:\"Bill Number\",id:\"billNum\"}),/*#__PURE__*/_jsx(SelectInput,{id:\"supName\",list:supplierList,name:\"Supplier Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-2\",children:[/*#__PURE__*/_jsx(SelectInput,{id:\"storeName\",list:storeList,name:\"Store Name\"}),/*#__PURE__*/_jsx(Input,{id:\"poNum\",name:\"PO Number\",for:\"po-number\",type:\"number\",placeholder:\"Enter PO\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",id:\"poAddButton\",value:\"Add\",onClickFunc:addPO})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Selected POs\"}),/*#__PURE__*/_jsx(\"p\",{id:\"sel-po\",children:poStore})]}),/*#__PURE__*/_jsx(Button,{type:\"button\",id:\"fetchMaterialBtn\",value:\"Fetch Materials\",onClickFunc:fetchMaterials})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"typematerialList\",children:[/*#__PURE__*/_jsx(TableHeader,{heads:[\"Material\",\"UOM\",\"Qty\"],flexG:[{flexGrow:0.4},{flexGrow:0},{flexGrow:0}]}),/*#__PURE__*/_jsx(\"div\",{className:\"material-rows\",children:materialList.map(function(mat,idx){return/*#__PURE__*/ (//console.log(idx);\n_jsx(TableRow,{matName:mat.NOMEN1,uom:mat.UNIT_NM,qty:mat.BAL_QTY},idx));})//<TableRowStatic matName={m.mat} uom={m.uom} qty={m.qty} />\n})]}),/*#__PURE__*/_jsx(Button,{type:\"button\",id:\"uploadImage\",value:\"Upload Image\",onClickFunc:uploadImage})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"billImage\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"billImageSRC\",alt:\"attached bill\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",id:\"submitBill\",value:\"Submit Bill\",onClickFunc:submitBill})]})]});}function submitBill(){alert(\"Button CLicked\");}function uploadImage(){}//function to fetch materials","map":{"version":3,"names":["React","useEffect","useState","Button","Input","SelectInput","TableHeader","TableRow","axios","BillReceive","poStore","setPoStore","supplierList","setSupplierList","materialList","setMaterialList","get","then","response","alert","data","fetchMaterials","supplierName","document","getElementById","value","post","store_po","console","log","storeList","addPO","storename","st","ponumber","stringData","existingData","flexGrow","map","mat","idx","NOMEN1","UNIT_NM","BAL_QTY","uploadImage","submitBill"],"sources":["C:/Users/shoaibkn/Documents/projects/app/client/src/pages/bill_receive.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Button from \"../components/button\";\r\nimport Input from \"../components/input\";\r\nimport SelectInput from \"../components/input-select\";\r\nimport TableHeader from \"../components/table-header\";\r\nimport TableRow from \"../components/table-row\";\r\nimport \"../index.css\";\r\nimport axios from \"axios\";\r\nexport default function BillReceive() {\r\n  const [poStore, setPoStore] = useState(\"\");\r\n  const [supplierList, setSupplierList] = useState([]);\r\n  const [materialList, setMaterialList] = useState([]);\r\n\r\n  //useEffect Hook to fetch supplier names\r\n  useEffect(() => {\r\n    //make api call to server to fetch all suppliers\r\n    axios\r\n      .get(\"http://localhost:3500/bill_receive/supplier_list\")\r\n      .then((response) => {\r\n        if (!response) {\r\n          alert(\"Critical Error No response Received!!\");\r\n        } else {\r\n          setSupplierList(response.data);\r\n          //console.log(genSupList);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  let fetchMaterials = () => {\r\n    let supplierName = document.getElementById(\"supName\").value;\r\n    axios\r\n      .post(\"/bill_receive/material_list\", {\r\n        supplierName: supplierName,\r\n        store_po: poStore,\r\n      })\r\n      .then((response) => {\r\n        setMaterialList(response.data[0]);\r\n        console.log(response.data[0]);\r\n      });\r\n  };\r\n\r\n  const storeList = [\r\n    \"Grinderies\",\r\n    \"Lasting\",\r\n    \"Chemical\",\r\n    \"Sample\",\r\n    \"Leather\",\r\n    \"General\",\r\n  ];\r\n  let addPO = () => {\r\n    let storename = document.getElementById(\"storeName\").value;\r\n    let st;\r\n    switch (storename) {\r\n      case \"Grinderies\":\r\n        st = \"GS\";\r\n        break;\r\n      case \"Lasting\":\r\n        st = \"LAS\";\r\n        break;\r\n      case \"Chemical\":\r\n        st = \"CS\";\r\n        break;\r\n      case \"Leather\":\r\n        st = \"LS\";\r\n        break;\r\n      case \"General\":\r\n        st = \"GES\";\r\n        break;\r\n      case \"Sample\":\r\n        st = \"SS\";\r\n        break;\r\n      default:\r\n        st = \"\";\r\n    }\r\n    let ponumber = document.getElementById(\"poNum\").value;\r\n    let stringData;\r\n    stringData = st + \"_\" + ponumber;\r\n\r\n    let existingData = poStore;\r\n    if (st === \"default\" || ponumber === \"\") {\r\n      alert(\"No Data Selected\");\r\n      return;\r\n    }\r\n    if (stringData === \"undefined_\") {\r\n      stringData = \"\";\r\n    }\r\n    if (stringData === \"No PO/Store Selected\") {\r\n      setPoStore(\"\");\r\n    }\r\n\r\n    if (existingData === \"_\") {\r\n      existingData = \"\";\r\n    }\r\n    if (existingData === \"\") {\r\n      setPoStore(stringData);\r\n    } else {\r\n      setPoStore(existingData + \"; \" + stringData);\r\n    }\r\n\r\n    document.getElementById(\"storeName\").value = \"\";\r\n    document.getElementById(\"poNum\").value = \"\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"billScreen\">\r\n      <div>\r\n        <div className=\"initEntry\">\r\n          <div className=\"screen-header\">Bill Receive Form</div>\r\n          <div>\r\n            <div className=\"form-group-1\">\r\n              <Input\r\n                name=\"Date\"\r\n                for=\"date\"\r\n                type=\"date\"\r\n                placeholder=\"dd/mm/yyyy\"\r\n              />\r\n              <Input\r\n                name=\"Bill Number\"\r\n                for=\"number\"\r\n                type=\"number\"\r\n                placeholder=\"Bill Number\"\r\n                id=\"billNum\"\r\n              />\r\n              <SelectInput\r\n                id=\"supName\"\r\n                list={supplierList}\r\n                name=\"Supplier Name\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group-2\">\r\n              <SelectInput id=\"storeName\" list={storeList} name=\"Store Name\" />\r\n              <Input\r\n                id=\"poNum\"\r\n                name=\"PO Number\"\r\n                for=\"po-number\"\r\n                type=\"number\"\r\n                placeholder=\"Enter PO\"\r\n              />\r\n              <Button\r\n                type=\"button\"\r\n                id=\"poAddButton\"\r\n                value=\"Add\"\r\n                onClickFunc={addPO}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group-3\">\r\n            <div>\r\n              <h3>Selected POs</h3>\r\n              <p id={\"sel-po\"}>{poStore}</p>\r\n            </div>\r\n            <Button\r\n              type=\"button\"\r\n              id=\"fetchMaterialBtn\"\r\n              value=\"Fetch Materials\"\r\n              onClickFunc={fetchMaterials}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"typematerialList\">\r\n          <TableHeader\r\n            heads={[\"Material\", \"UOM\", \"Qty\"]}\r\n            flexG={[{ flexGrow: 0.4 }, { flexGrow: 0 }, { flexGrow: 0 }]}\r\n          />\r\n          <div className=\"material-rows\">\r\n            {\r\n              materialList.map((mat, idx) => (\r\n                //console.log(idx);\r\n                <TableRow\r\n                  matName={mat.NOMEN1}\r\n                  uom={mat.UNIT_NM}\r\n                  qty={mat.BAL_QTY}\r\n                  key={idx}\r\n                />\r\n              ))\r\n              //<TableRowStatic matName={m.mat} uom={m.uom} qty={m.qty} />\r\n            }\r\n          </div>\r\n        </div>\r\n        <Button\r\n          type=\"button\"\r\n          id=\"uploadImage\"\r\n          value=\"Upload Image\"\r\n          onClickFunc={uploadImage}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"billImage\">\r\n        <img className=\"billImageSRC\" alt=\"attached bill\"></img>\r\n        <Button\r\n          type=\"button\"\r\n          id=\"submitBill\"\r\n          value=\"Submit Bill\"\r\n          onClickFunc={submitBill}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction submitBill() {\r\n  alert(\"Button CLicked\");\r\n}\r\n\r\nfunction uploadImage() {}\r\n\r\n//function to fetch materials\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}